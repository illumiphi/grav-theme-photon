{% extends 'default.html.twig' %}
{% set type = "article" %}
{% set types = "articles" %}
{% block template %}
{{ parent() }}
<!-- user/themes/photon/templates/article.html.twig -->
{% endblock template %}

{% block body_template_classes %}{{ parent() }} {{ type }}{% endblock body_template_classes %}

{% block main %}
  <main data-collection="{{ page.collection.count }}">
    {% block content %}
      {% include ["_articles/#{ page.template }.html.twig", "_articles/article.html.twig"] with { 'article': page } %}
      {% block collection %}

        <section class="collection">
          <header>
            <h1>{{ types }}: <span class="count">{{ page.collection.count() }}</span></h1>
            <nav>
              {# placeholder functions for filter taxonomy items in current collection #}
              {%- set active_class = (page.active or page.activeChild) ? ' class="active"' : '' %}
              {% for tag in page.taxonomy.tag %}
                  <!-- <a href="search/tag:{{ tag }}">{{ tag }}</a> -->
              {% endfor %}

              <a id="all" href="{{ page.url }}">all</a>
              <a id="tag-featured" href="{{ page.url }}{{ page.url ends with '/' ? '' : '/' }}tag:featured">featured</a>
              <a id="tag-showcase" href="{{ page.url }}{{ page.url ends with '/' ? '' : '/' }}tag:showcase">showcase</a>
              <a id="modal" href="javascript:toggleModal();">[ ]</a>
            </nav>
          </header>
          {% for article in page.collection %}
            {# % if not (article.url == page.url) and article.routable == true and article.visible == true % #}
              {% include ["_articles/#{ article.template }-excerpt.html.twig", "_articles/article-excerpt.html.twig"] with { 'article': article } %}
            {# % endif % #}
          {% endfor %}

          {% include '_sections/pagination.html.twig'   %}
        </section>

      {% endblock collection %}
    {% endblock content %}
</main>
{% endblock main %}
